(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9927:function(e,n,o){Promise.resolve().then(o.bind(o,4390))},4390:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return g}});var t=o(9268);o(3752);var r=o(6006),i=o(2592),l=o(5846),s=o.n(l),c=o(4942),a=()=>{let{isLoggedIn:e,isAdmin:n,startLogin:o,logout:l}=(0,c.a)(),[a,d,g]=(0,i.Z)(["jwt"]);a.jwt;let[u,h]=(0,r.useState)(e);return(0,r.useEffect)(()=>{h(e)},[]),(0,t.jsx)("header",{children:(0,t.jsxs)("nav",{className:"navbar navbar-dark bg-dark",children:[(0,t.jsx)("img",{src:"/img/website-logo.png",alt:"CodeDudes",className:"nav-logo"}),(0,t.jsxs)("ul",{className:"nav-items",children:[(0,t.jsx)("li",{children:(0,t.jsx)(s(),{href:"/",children:"Home"})}),e&&n&&(0,t.jsx)("li",{children:(0,t.jsx)(s(),{href:"/admin",children:"Admin"})}),e&&(0,t.jsx)("li",{children:(0,t.jsx)(s(),{href:"/profile",children:"Profile"})}),e?(0,t.jsx)("li",{onClick:function(){console.log("logout clicked"),l(),console.log("logout complete")},children:"Logout"}):(0,t.jsx)("li",{onClick:function(){console.log("login clicked"),o(),console.log("login clicked")},children:"Login"})]})]})})};function d(){return(0,t.jsx)("footer",{children:(0,t.jsx)("div",{className:"footer-content",children:(0,t.jsx)("section",{className:"footer-base",children:(0,t.jsxs)("div",{className:"footer-legal",children:[(0,t.jsx)("div",{className:"footer-legal-copyright",children:"Copyright \xa9 2023 CodeDudes"}),(0,t.jsxs)("div",{className:"footer-legal-links",children:[(0,t.jsx)("a",{href:"#",children:"Privacy Policy"}),(0,t.jsx)("a",{href:"#",children:"Terms of Use"})]})]})})})})}function g(e){let{children:n}=e;return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{children:(0,t.jsxs)(c.H,{children:[(0,t.jsx)(a,{}),n,(0,t.jsx)(d,{})]})})})}o(2474)},4942:function(e,n,o){"use strict";o.d(n,{H:function(){return h},a:function(){return _}});var t=o(9268),r=o(2592),i=o(9180),l=(e,n)=>{let o=Object.entries(n).map(e=>{let[n,o]=e;return"".concat(n,"=").concat(encodeURIComponent(o))}).join("&");return"".concat(e,"?").concat(o)};let s=e=>l("https://www.linkedin.com/oauth/v2/authorization",{response_type:"code",client_id:"77k9klio9keegq",redirect_uri:"https://learn.codedudes.dev/login/callback",scope:"profile email openid",state:e}),c=Object.freeze({SESSION_STORAGE_OAUTH_STATE_KEY:"oauth_state",SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY:"login_provider_key",OAUTH_PROVIDER_LINKEDIN:"linkedin",COOKIE_AUTH_TOKEN_KEY:"jwt"});var a=o(6008),d=o(6006);let g="https://api.codedudes.dev",u=(0,d.createContext)({isLoggedIn:!1,isAdmin:!1,startLogin:()=>{},login:(e,n,o)=>{},logout:()=>{}}),h=e=>{let{children:n}=e;console.log("base url",g);let o=(0,a.useRouter)(),[l,h,_]=(0,r.Z)(["jwt"]),[f,E]=(0,d.useState)(!1),[O,S]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{E(!!l.jwt)},[]),(0,t.jsx)(u.Provider,{value:{isLoggedIn:f,isAdmin:O,startLogin:()=>{console.log("startLogin");var e=(0,i.Z)(),n=s(e);window.sessionStorage.setItem(c.SESSION_STORAGE_OAUTH_STATE_KEY,e),window.sessionStorage.setItem(c.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY,c.OAUTH_PROVIDER_LINKEDIN),console.log("redirect uri",n),window.location.href=n},login:function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{e.error?console.log("error logging in ",err):console.log("loggin success")};(async function(){var r=e=>{t({error:e})};if(!function(e){if(!e)return!1;let n=window.sessionStorage.getItem(c.SESSION_STORAGE_OAUTH_STATE_KEY);return!!n&&n===e}(n)){r("Error logging in. State mismatch");return}let i=window.sessionStorage.getItem(c.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY);if(!(i&&i===c.OAUTH_PROVIDER_LINKEDIN)){r("Error logging in. Provider not supported");return}try{let n=await fetch(g+"/login/linkedin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:e,redirectUri:"https://learn.codedudes.dev/login/callback"})});if(!n.ok){r("Error logging in. Unable to log you in right now");return}E(!0),S(!1)}catch(e){r("Error loggin in. Try again");return}o.push("/")})()},logout:()=>{_("jwt"),E(!1),S(!1),console.log("logout")}},children:n})},_=()=>(0,d.useContext)(u)},3752:function(){}},function(e){e.O(0,[390,625,253,488,744],function(){return e(e.s=9927)}),_N_E=e.O()}]);