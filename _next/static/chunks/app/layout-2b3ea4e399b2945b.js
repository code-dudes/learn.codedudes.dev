(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6687:function(e,o,t){Promise.resolve().then(t.bind(t,4942)),Promise.resolve().then(t.bind(t,3896)),Promise.resolve().then(t.t.bind(t,2474,23)),Promise.resolve().then(t.t.bind(t,3752,23))},3896:function(e,o,t){"use strict";t.r(o);var n=t(9268),i=t(6006),r=t(2592),l=t(5846),s=t.n(l),c=t(4942);o.default=()=>{let{isLoggedIn:e,startLogin:o,logout:t}=(0,c.useAuth)(),[l,a,d]=(0,r.Z)(["jwt"]);l.jwt;let[u,g]=(0,i.useState)(e);return(0,i.useEffect)(()=>{g(e)},[]),(0,n.jsx)("header",{children:(0,n.jsxs)("nav",{className:"navbar navbar-dark bg-dark",children:[(0,n.jsx)("img",{src:"/img/website-logo.png",alt:"CodeDudes",className:"nav-logo"}),(0,n.jsxs)("ul",{className:"nav-items",children:[(0,n.jsx)("li",{children:(0,n.jsx)(s(),{href:"/",children:"Home"})}),u?(0,n.jsx)("li",{onClick:function(){console.log("logout clicked"),t(),console.log("logout complete")},children:"Logout"}):(0,n.jsx)("li",{onClick:function(){console.log("login clicked"),o(),console.log("login clicked")},children:"Login"}),u&&(0,n.jsx)("li",{children:(0,n.jsx)(s(),{href:"/profile",children:"Profile"})})]})]})})}},4942:function(e,o,t){"use strict";t.r(o),t.d(o,{AuthProvider:function(){return _},useAuth:function(){return E}});var n=t(9268),i=t(2592),r=t(9180),l=(e,o)=>{let t=Object.entries(o).map(e=>{let[o,t]=e;return"".concat(o,"=").concat(encodeURIComponent(t))}).join("&");return"".concat(e,"?").concat(t)};let s=e=>l("https://www.linkedin.com/oauth/v2/authorization",{response_type:"code",client_id:"77k9klio9keegq",redirect_uri:"https://learn.codedudes.dev/login/callback",scope:"profile email openid",state:e}),c=Object.freeze({SESSION_STORAGE_OAUTH_STATE_KEY:"oauth_state",SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY:"login_provider_key",OAUTH_PROVIDER_LINKEDIN:"linkedin",COOKIE_AUTH_TOKEN_KEY:"jwt"});var a=t(6008),d=t(6006);let u="https://api.codedudes.dev",g=(0,d.createContext)({isLoggedIn:!1,isAdmin:!1,startLogin:()=>{},login:(e,o)=>"",logout:()=>{}}),_=e=>{let{children:o}=e;console.log("base url",u),(0,a.useRouter)();let[t,l]=(0,d.useState)(!1),[_,E]=(0,d.useState)(!1),[O,S,h]=(0,i.Z)(["jwt"]);return(0,n.jsx)(g.Provider,{value:{isLoggedIn:t,isAdmin:_,startLogin:()=>{console.log("startLogin");var e=(0,r.Z)(),o=s(e);window.sessionStorage.setItem(c.SESSION_STORAGE_OAUTH_STATE_KEY,e),window.sessionStorage.setItem(c.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY,c.OAUTH_PROVIDER_LINKEDIN),console.log("redirect uri",o),window.location.href=o},login:(e,o)=>{!async function(){if(!function(e){if(!e)return!1;let o=window.sessionStorage.getItem(c.SESSION_STORAGE_OAUTH_STATE_KEY);return!!o&&o===e}(o)){setLoggingInMessage("Error logging in. State mismatch");return}let t=window.sessionStorage.getItem(c.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY);if(t&&t===c.OAUTH_PROVIDER_LINKEDIN)try{let o=await fetch(u+"/login/linkedin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:e,redirectUri:"https://learn.codedudes.dev/login/callback"})});o.ok}catch(e){return console.log(e),"Error loggin in. Try again"}}()},logout:()=>{h("jwt"),l(!1),E(!1),console.log("logout")}},children:o})},E=()=>(0,d.useContext)(g)},3752:function(){}},function(e){e.O(0,[390,625,253,488,744],function(){return e(e.s=6687)}),_N_E=e.O()}]);