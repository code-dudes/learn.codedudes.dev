(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{6023:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=e.split(";"),i=(t||{}).decode||o,s=0;s<n.length;s++){var a=n[s],u=a.indexOf("=");if(!(u<0)){var c=a.substring(0,u).trim();if(void 0==r[c]){var l=a.substring(u+1,a.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),r[c]=function(e,t){try{return t(e)}catch(t){return e}}(l,i)}}}return r},t.q=function(e,t,o){var i=o||{},s=i.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!n.test(a))throw TypeError("argument val is invalid");var u=e+"="+a;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!n.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");u+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var o=decodeURIComponent,r=encodeURIComponent,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},8687:function(e,t,o){Promise.resolve().then(o.bind(o,8339))},8339:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return a}});var r=o(9268),n=o(6006),i=o(6008),s=o(4942);function a(){let e=(0,i.useSearchParams)();console.log("query params",Array.from(e.keys()));let{login:t}=(0,s.a)(),[o,a]=(0,n.useState)("Logging you in");return(0,n.useEffect)(()=>{let o=e.get("code"),r=e.get("state");console.log("starting login"),t(o,r,e=>{if(e.error){console.log("error logging in",e.error),a(e.error);return}console.log("loggged in successfully")})},[]),(0,r.jsx)("p",{children:o})}},4942:function(e,t,o){"use strict";o.d(t,{H:function(){return p},a:function(){return g}});var r=o(9268),n=o(2592),i=o(9180),s=(e,t)=>{let o=Object.entries(t).map(e=>{let[t,o]=e;return"".concat(t,"=").concat(encodeURIComponent(o))}).join("&");return"".concat(e,"?").concat(o)};let a=e=>s("https://www.linkedin.com/oauth/v2/authorization",{response_type:"code",client_id:"77k9klio9keegq",redirect_uri:"https://learn.codedudes.dev/login/callback",scope:"profile email openid",state:e}),u=Object.freeze({SESSION_STORAGE_OAUTH_STATE_KEY:"oauth_state",SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY:"login_provider_key",OAUTH_PROVIDER_LINKEDIN:"linkedin",COOKIE_AUTH_TOKEN_KEY:"jwt"});var c=o(6008),l=o(6006);let f="https://api.codedudes.dev",d=(0,l.createContext)({isLoggedIn:!1,isAdmin:!1,startLogin:()=>{},login:(e,t,o)=>{},logout:()=>{}}),p=e=>{let{children:t}=e;console.log("base url",f);let o=(0,c.useRouter)(),[s,p,g]=(0,n.Z)(["jwt"]),[h,v]=(0,l.useState)(!1),[_,m]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{v(!!s.jwt)},[]),(0,r.jsx)(d.Provider,{value:{isLoggedIn:h,isAdmin:_,startLogin:()=>{console.log("startLogin");var e=(0,i.Z)(),t=a(e);window.sessionStorage.setItem(u.SESSION_STORAGE_OAUTH_STATE_KEY,e),window.sessionStorage.setItem(u.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY,u.OAUTH_PROVIDER_LINKEDIN),console.log("redirect uri",t),window.location.href=t},login:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{e.error?console.log("error logging in ",err):console.log("loggin success")};(async function(){var n=e=>{r({error:e})};if(!function(e){if(!e)return!1;let t=window.sessionStorage.getItem(u.SESSION_STORAGE_OAUTH_STATE_KEY);return!!t&&t===e}(t)){n("Error logging in. State mismatch");return}let i=window.sessionStorage.getItem(u.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY);if(!(i&&i===u.OAUTH_PROVIDER_LINKEDIN)){n("Error logging in. Provider not supported");return}try{let t=await fetch(f+"/login/linkedin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:e,redirectUri:"https://learn.codedudes.dev/login/callback"})});if(!t.ok){n("Error logging in. Unable to log you in right now");return}v(!0),m(!1)}catch(e){n("Error loggin in. Try again");return}o.push("/")})()},logout:()=>{g("jwt"),v(!1),m(!1),console.log("logout")}},children:t})},g=()=>(0,l.useContext)(d)},3177:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=o(6006),n=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,o){var r,u={},c=null,l=null;for(r in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,r)&&!a.hasOwnProperty(r)&&(u[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===u[r]&&(u[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:l,props:u,_owner:s.current}}t.jsx=u,t.jsxs=u},9268:function(e,t,o){"use strict";e.exports=o(3177)},6008:function(e,t,o){e.exports=o(3027)},2592:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var r=o(6006),n=o(6023);function i(e,t){void 0===t&&(t={});var o,r=e&&"j"===e[0]&&":"===e[1]?e.substr(2):e;if(void 0===(o=t.doNotParse)&&(o=!r||"{"!==r[0]&&"["!==r[0]&&'"'!==r[0]),!o)try{return JSON.parse(r)}catch(e){}return e}var s=function(){return(s=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=function(){function e(e,t){var o=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies="string"==typeof e?n.Q(e,t):"object"==typeof e&&null!==e?e:{},new Promise(function(){o.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie}).catch(function(){})}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=n.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,o){return void 0===t&&(t={}),this._updateBrowserValues(o),i(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var o={};for(var r in this.cookies)o[r]=i(this.cookies[r],e);return o},e.prototype.set=function(e,t,o){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=s(s({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=n.q(e,t,o)),this._emitChange({name:e,value:t,options:o})},e.prototype.remove=function(e,t){var o=t=s(s({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=s({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=n.q(e,"",o)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),u=r.createContext(new a);function c(e){var t=(0,r.useContext)(u);if(!t)throw Error("Missing <CookiesProvider>");var o=t.getAll(),n=(0,r.useState)(o),i=n[0],s=n[1],a=(0,r.useRef)(i);return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement&&(0,r.useLayoutEffect)(function(){function o(){var o=t.getAll();(function(e,t,o){if(!e)return!0;for(var r=0;r<e.length;r++){var n=e[r];if(t[n]!==o[n])return!0}return!1})(e||null,o,a.current)&&s(o),a.current=o}return t.addChangeListener(o),function(){t.removeChangeListener(o)}},[t]),[i,(0,r.useMemo)(function(){return t.set.bind(t)},[t]),(0,r.useMemo)(function(){return t.remove.bind(t)},[t])]}u.Provider,u.Consumer},9180:function(e,t,o){"use strict";let r,n,i;o.d(t,{Z:function(){return f}});let s=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}let u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));let c=0,l=0;var f=function(e,t,o){let r=t&&o||0,s=t||Array(16),f=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){let t=e.random||(e.rng||a)();null==f&&(f=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=i=(t[6]<<8|t[7])&16383)}let p=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:l+1,h=p-c+(g-l)/1e4;if(h<0&&void 0===e.clockseq&&(d=d+1&16383),(h<0||p>c)&&void 0===e.nsecs&&(g=0),g>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,l=g,i=d,p+=122192928e5;let v=((268435455&p)*1e4+g)%4294967296;s[r++]=v>>>24&255,s[r++]=v>>>16&255,s[r++]=v>>>8&255,s[r++]=255&v;let _=p/4294967296*1e4&268435455;s[r++]=_>>>8&255,s[r++]=255&_,s[r++]=_>>>24&15|16,s[r++]=_>>>16&255,s[r++]=d>>>8|128,s[r++]=255&d;for(let e=0;e<6;++e)s[r+e]=f[e];return t||function(e,t=0){return(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase()}(s)}}},function(e){e.O(0,[253,488,744],function(){return e(e.s=8687)}),_N_E=e.O()}]);