(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{4482:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=e.split(";"),i=(t||{}).decode||o,s=0;s<n.length;s++){var a=n[s],u=a.indexOf("=");if(!(u<0)){var c=a.substring(0,u).trim();if(void 0==r[c]){var l=a.substring(u+1,a.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),r[c]=function(e,t){try{return t(e)}catch(t){return e}}(l,i)}}}return r},t.q=function(e,t,o){var i=o||{},s=i.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!n.test(a))throw TypeError("argument val is invalid");var u=e+"="+a;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!n.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");u+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var o=decodeURIComponent,r=encodeURIComponent,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},3898:function(e,t,o){Promise.resolve().then(o.bind(o,7188))},7188:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Page}});var r=o(7437),n=o(2265),i=o(4033),s=o(6951);function Page(){let e=(0,i.useSearchParams)();console.log("query params",Array.from(e.keys()));let{login:t}=(0,s.a)(),[o,a]=(0,n.useState)("Logging in");return(0,n.useEffect)(()=>{let o=e.get("code"),r=e.get("state");console.log("starting login"),t(o,r,e=>{if(e.error){console.log("Error Logging in",e.error),a(e.error);return}console.log("loggged in successfully")})},[]),(0,r.jsx)("p",{children:o})}},6951:function(e,t,o){"use strict";o.d(t,{H:function(){return AuthProvider},a:function(){return useAuth}});var r=o(7437),n=o(6635),i=o(848),getURLWithQueryParams=(e,t)=>{let o=Object.entries(t).map(e=>{let[t,o]=e;return"".concat(t,"=").concat(encodeURIComponent(o))}).join("&");return"".concat(e,"?").concat(o)};let GetLinkedinLoginUrl=e=>getURLWithQueryParams("https://www.linkedin.com/oauth/v2/authorization",{response_type:"code",client_id:"77k9klio9keegq",redirect_uri:"https://learn.codedudes.dev/login/callback",scope:"profile email openid",state:e}),s=Object.freeze({SESSION_STORAGE_OAUTH_STATE_KEY:"oauth_state",SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY:"login_provider_key",OAUTH_PROVIDER_LINKEDIN:"linkedin",COOKIE_AUTH_TOKEN_KEY:"jwt"});var a=o(4033),u=o(2265);let c="https://api.codedudes.dev",l=(0,u.createContext)({isLoggedIn:!1,isAdmin:!1,startLogin:()=>{},login:(e,t,o)=>{},logout:()=>{}}),AuthProvider=e=>{let{children:t}=e;console.log("base url",c);let o=(0,a.useRouter)(),[d,f,g]=(0,n.Z)(["jwt"]),[p,h]=(0,u.useState)(!1),[_,v]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{h(!!d.jwt)},[]),(0,r.jsx)(l.Provider,{value:{isLoggedIn:p,isAdmin:_,startLogin:()=>{console.log("startLogin");var e=(0,i.Z)(),t=GetLinkedinLoginUrl(e);window.sessionStorage.setItem(s.SESSION_STORAGE_OAUTH_STATE_KEY,e),window.sessionStorage.setItem(s.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY,s.OAUTH_PROVIDER_LINKEDIN),console.log("redirect uri",t),window.location.href=t},login:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{e.error?console.log("error logging in ",err):console.log("loggin success")};(async function(){var onError=e=>{r({error:e})};if(!function(e){if(!e)return!1;let t=window.sessionStorage.getItem(s.SESSION_STORAGE_OAUTH_STATE_KEY);return!!t&&t===e}(t)){onError("Error logging in. State mismatch");return}let n=window.sessionStorage.getItem(s.SESSION_STORAGE_OAUTH_LOGIN_PROVIDER_KEY);if(!(n&&n===s.OAUTH_PROVIDER_LINKEDIN)){onError("Error logging in. Provider not supported");return}try{let t=await fetch(c+"/login/linkedin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:e,redirectUri:"https://learn.codedudes.dev/login/callback"})});if(!t.ok){onError("Error logging in. Unable to log you in right now");return}h(!0),v(!1)}catch(e){onError("Error loggin in. Try again");return}o.push("/")})()},logout:()=>{g("jwt"),h(!1),v(!1),console.log("logout")}},children:t})},useAuth=()=>(0,u.useContext)(l)},622:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=o(2265),n=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,o){var r,u={},c=null,l=null;for(r in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,r)&&!a.hasOwnProperty(r)&&(u[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===u[r]&&(u[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:l,props:u,_owner:s.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,o){"use strict";e.exports=o(622)},4033:function(e,t,o){e.exports=o(94)},6635:function(e,t,o){"use strict";o.d(t,{Z:function(){return useCookies}});var r=o(2265),n=o(4482);function readCookie(e,t){void 0===t&&(t={});var o,r=e&&"j"===e[0]&&":"===e[1]?e.substr(2):e;if(void 0===(o=t.doNotParse)&&(o=!r||"{"!==r[0]&&"["!==r[0]&&'"'!==r[0]),!o)try{return JSON.parse(r)}catch(e){}return e}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=function(){function Cookies(e,t){var o=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies="string"==typeof e?n.Q(e,t):"object"==typeof e&&null!==e?e:{},new Promise(function(){o.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie}).catch(function(){})}return Cookies.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=n.Q(document.cookie,e))},Cookies.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},Cookies.prototype.get=function(e,t,o){return void 0===t&&(t={}),this._updateBrowserValues(o),readCookie(this.cookies[e],t)},Cookies.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var o={};for(var r in this.cookies)o[r]=readCookie(this.cookies[r],e);return o},Cookies.prototype.set=function(e,t,o){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=__assign(__assign({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=n.q(e,t,o)),this._emitChange({name:e,value:t,options:o})},Cookies.prototype.remove=function(e,t){var o=t=__assign(__assign({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=__assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=n.q(e,"",o)),this._emitChange({name:e,value:void 0,options:t})},Cookies.prototype.addChangeListener=function(e){this.changeListeners.push(e)},Cookies.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},Cookies}(),s=r.createContext(new i);function useCookies(e){var t=(0,r.useContext)(s);if(!t)throw Error("Missing <CookiesProvider>");var o=t.getAll(),n=(0,r.useState)(o),i=n[0],a=n[1],u=(0,r.useRef)(i);return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement&&(0,r.useLayoutEffect)(function(){function onChange(){var o=t.getAll();(function(e,t,o){if(!e)return!0;for(var r=0;r<e.length;r++){var n=e[r];if(t[n]!==o[n])return!0}return!1})(e||null,o,u.current)&&a(o),u.current=o}return t.addChangeListener(onChange),function(){t.removeChangeListener(onChange)}},[t]),[i,(0,r.useMemo)(function(){return t.set.bind(t)},[t]),(0,r.useMemo)(function(){return t.remove.bind(t)},[t])]}s.Provider,s.Consumer},848:function(e,t,o){"use strict";let r,n,i;o.d(t,{Z:function(){return esm_browser_v1}});let s=new Uint8Array(16),a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));let u=0,c=0;var esm_browser_v1=function(e,t,o){let l=t&&o||0,d=t||Array(16),f=(e=e||{}).node||n,g=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==g){let t=e.random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)})();null==f&&(f=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==g&&(g=i=(t[6]<<8|t[7])&16383)}let p=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:c+1,_=p-u+(h-c)/1e4;if(_<0&&void 0===e.clockseq&&(g=g+1&16383),(_<0||p>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,c=h,i=g,p+=122192928e5;let v=((268435455&p)*1e4+h)%4294967296;d[l++]=v>>>24&255,d[l++]=v>>>16&255,d[l++]=v>>>8&255,d[l++]=255&v;let m=p/4294967296*1e4&268435455;d[l++]=m>>>8&255,d[l++]=255&m,d[l++]=m>>>24&15|16,d[l++]=m>>>16&255,d[l++]=g>>>8|128,d[l++]=255&g;for(let e=0;e<6;++e)d[l+e]=f[e];return t||function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(d)}}},function(e){e.O(0,[971,472,744],function(){return e(e.s=3898)}),_N_E=e.O()}]);